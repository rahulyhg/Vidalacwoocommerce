jQuery(function($){function get_device($wcpt){var device="laptop";return $(window).width()<701?device="phone":$(window).width()<1201&&(device="tablet"),device}function get_device_table($wcpt){var device=get_device($wcpt),table_selector=".wcpt-table-scroll-wrapper-outer.wcpt-device-laptop:visible > .wcpt-table-scroll-wrapper > .wcpt-table, .wcpt-table-scroll-wrapper-outer.wcpt-device-laptop:visible .frzTbl-table",$table;return"phone"!=device||$wcpt.find(table_selector.replace("laptop","phone")).length||(device="tablet"),"tablet"!=device||$wcpt.find(table_selector.replace("laptop","tablet")).length||(device="laptop"),$wcpt.find(table_selector.replace("laptop",device))}function htmlentity(string){return string.replace(/[\u00A0-\u9999<>\&]/gim,function(i){return"&#"+i.charCodeAt(0)+";"})}window.wcpt_cache={data:{},remove:function(url){delete window.wcpt_cache.data[url]},exist:function(url){return window.wcpt_cache.data.hasOwnProperty(url)&&null!==window.wcpt_cache.data[url]},get:function(url){return window.wcpt_cache.data[url]},set:function(url,cachedData,callback){window.wcpt_cache.remove(url),window.wcpt_cache.data[url]=cachedData,$.isFunction(callback)&&callback(cachedData)}},window.wcpt_product_form={},$("body").on("wcpt_layout",".wcpt",function layout(){var $wcpt=$(this),$wrap=$wcpt.find(".wcpt-table-scroll-wrapper:visible"),$table=$wrap.find(".wcpt-table");if($(">.wcpt-device-view-loading-icon",$wrap).length)attempt_ajax($wcpt,"",!1,"device_view");else{$wrap.find(".wcpt-heading").each(function(){var $this=$(this);$this.find(".wcpt-sorting-icons").length&&$this.addClass("wcpt-sortable")});var sc_attrs_string=$wcpt.attr("data-wcpt-sc-attrs"),sc_attrs=sc_attrs_string&&"{}"!==sc_attrs_string?JSON.parse(sc_attrs_string):{},options={left:sc_attrs.laptop_freeze_left?parseInt(sc_attrs.laptop_freeze_left):0,right:sc_attrs.laptop_freeze_right?parseInt(sc_attrs.laptop_freeze_right):0,heading:!!sc_attrs.laptop_freeze_heading&&"false"!==sc_attrs.laptop_freeze_heading,wrapperWidth:sc_attrs.laptop_freeze_wrapper_width?parseInt(sc_attrs.laptop_freeze_wrapper_width):0,wrapperHeight:sc_attrs.laptop_freeze_wrapper_height?parseInt(sc_attrs.laptop_freeze_wrapper_height):0,tableWidth:sc_attrs.laptop_freeze_table_width?parseInt(sc_attrs.laptop_freeze_table_width):0,offset:sc_attrs.laptop_scroll_offset?parseInt(sc_attrs.laptop_scroll_offset):0,breakpoint:{1200:{left:sc_attrs.tablet_freeze_left?parseInt(sc_attrs.tablet_freeze_left):0,right:sc_attrs.tablet_freeze_right?parseInt(sc_attrs.tablet_freeze_right):0,heading:!!sc_attrs.tablet_freeze_heading&&"false"!==sc_attrs.tablet_freeze_heading,wrapperWidth:sc_attrs.tablet_freeze_wrapper_width?parseInt(sc_attrs.tablet_freeze_wrapper_width):0,wrapperHeight:sc_attrs.tablet_freeze_wrapper_height?parseInt(sc_attrs.tablet_freeze_wrapper_height):0,tableWidth:sc_attrs.tablet_freeze_table_width?parseInt(sc_attrs.tablet_freeze_table_width):0,offset:sc_attrs.tablet_scroll_offset?parseInt(sc_attrs.tablet_scroll_offset):0},800:{left:sc_attrs.phone_freeze_left?parseInt(sc_attrs.phone_freeze_left):0,right:sc_attrs.phone_freeze_right?parseInt(sc_attrs.phone_freeze_right):0,heading:!!sc_attrs.phone_freeze_heading&&"false"!==sc_attrs.phone_freeze_heading,wrapperWidth:sc_attrs.phone_freeze_wrapper_width?parseInt(sc_attrs.phone_freeze_wrapper_width):0,wrapperHeight:sc_attrs.phone_freeze_wrapper_height?parseInt(sc_attrs.phone_freeze_wrapper_height):0,tableWidth:sc_attrs.phone_freeze_table_width?parseInt(sc_attrs.phone_freeze_table_width):0,offset:sc_attrs.phone_scroll_offset?parseInt(sc_attrs.phone_scroll_offset):0}}},$table;($table=get_device_table($wcpt)).length&&!$table.data("freezeTable")&&$table.freezeTable(options)}});var resize_timer,throttle=250,window_width;function window_resize(e){clearTimeout(resize_timer);var new_window_width=window.innerWidth;new_window_width!=window_width&&(window_width=new_window_width,resize_timer=setTimeout(trigger_layout,throttle))}function trigger_layout(){$(".wcpt").trigger("wcpt_layout")}function after_every_load($container){$(".cart",$container).each(function(){$(this).attr("action",window.location.href)});var $qty_wrapper=$(".quantity",$container);maybe_disable_qty_controllers($(".quantity",$container)),prep_variation_options($container)}function lazy_load_start(){window.wcpt_lazy_loaded||($(".wcpt-lazy-load").each(function(){var $this=$(this);attempt_ajax($(this),!1,!1,"lazy_load")}),window.wcpt_lazy_loaded=!0)}function get_product_rows($elm){var $row=$elm.closest(".wcpt-row"),product_id=$row.attr("data-wcpt-product-id"),variation_id=$row.attr("data-wcpt-variation-id"),$scroll_wrapper=$elm.closest(".wcpt-table-scroll-wrapper"),row_selector;return $(row_selector=variation_id?'.wcpt-row[data-wcpt-variation-id="'+variation_id+'"]':'.wcpt-row[data-wcpt-product-id="'+product_id+'"]',$scroll_wrapper)}function button_click(e){var $button=$(this),link_code=$button.attr("data-wcpt-link-code"),$product_rows=get_product_rows($button),product_id=$product_rows.attr("data-wcpt-product-id"),is_variable=$product_rows.hasClass("wcpt-product-type-variable"),has_addons=$product_rows.hasClass("wcpt-product-has-addons");if(-1===$.inArray(link_code,["product_link","external_link","custom_field","custom_field_media_id"])){e.preventDefault();var ajax_data={action:"wcpt_add_to_cart","add-to-cart":$product_rows.attr("data-wcpt-product-id"),product_id:product_id,quantity:1},$wcpt_qty=$(".wcpt-quantity-wrapper input.qty, .wcpt-quantity-wrapper > select.wcpt-qty-select",$product_rows),$wc_qty=$(".cart .qty",$product_rows);$wc_qty.length&&(ajax_data.quantity=$wc_qty.val()),$wcpt_qty.length&&(ajax_data.quantity=$wcpt_qty.val()),ajax_data.quantity||(ajax_data.quantity=1);var variation_attributes=$button.closest(".wcpt-row").attr("data-wcpt-variation-attributes");if(variation_attributes&&$.extend(ajax_data,JSON.parse(variation_attributes)),ajax_data.return_notice="cart_ajax"==link_code,is_variable||has_addons){if(is_variable){var variation_id=$product_rows.data("wcpt_variation_id"),complete_match=$product_rows.data("wcpt_complete_match"),attributes=$product_rows.data("wcpt_attributes"),variation_found=$product_rows.data("wcpt_variation_found"),variation_selected=$product_rows.data("wcpt_variation_selected"),variation_available=$product_rows.data("wcpt_variation_available");if(variation_ops=$product_rows.data("wcpt_variation_ops"),variation_ops){if(!variation_found)return void alert(wcpt_i18n.i18n_no_matching_variations_text);if(!variation_selected)return void alert(wcpt_i18n.i18n_make_a_selection_text);if(!variation_available)return void alert(wcpt_i18n.i18n_unavailable_text)}if(attributes&&$.extend(ajax_data,attributes),variation_id&&complete_match&&!has_addons)return ajax_data.variation_id=variation_id,wcpt_ajax_add_to_cart($button,ajax_data),!1}if(void 0!==window.wcpt_product_form[product_id]){var $modal=$(window.wcpt_product_form[product_id]);$modal.appendTo("body"),$("body").addClass("wcpt-modal-on"),$modal.show(),prep_product_form($modal,$button,ajax_data)}else{ajax_data.action="wcpt_get_product_form_modal",delete ajax_data["add-to-cart"];var $loading_modal=$($("#tmpl-wcpt-product-form-loading-modal").html());$.ajax({url:wcpt_i18n.ajax_url,method:"POST",beforeSend:function(){$("body").append($loading_modal),$loading_modal.on("wcpt_close",function(){window.wcpt_cancel_product_form=!0}),window.wcpt_cancel_product_form=!1},data:ajax_data}).done(function(response){if(window.wcpt_product_form[product_id]=response,!window.wcpt_cancel_product_form){var $modal=$(response);$modal.appendTo("body"),$loading_modal.remove(),$("body").addClass("wcpt-modal-on"),prep_product_form($modal,$button,ajax_data)}})}return!1}if(!$button.hasClass("wcpt-disabled"))if("cart_ajax"==link_code)wcpt_ajax_add_to_cart($button,ajax_data);else{var $form=$('<form method="POST" action="'+$button.attr("href")+'" style="display: none;"></form>');$.each(ajax_data,function(key,val){if("action"!=key){var $input=$('<input type="hidden" name="'+key+'" value="" />');$input.val(val),$form.append($input)}}),$form.appendTo($("body")).submit()}}}function wcpt_ajax_add_to_cart($button,ajax_data){var $product_row=get_product_rows($button),url=wcpt_i18n.ajax_url;$button.hasClass("wcpt-button-cart_ajax")&&($button=$button.add($product_row.find(".wcpt-button-cart_ajax").not($button))),"undefined"!=typeof wc_add_to_cart_params&&void 0!==wc_add_to_cart_params.wc_ajax_url&&(url=wc_add_to_cart_params.wc_ajax_url.replace("%%endpoint%%","wcpt_add_to_cart")),$.ajax({url:url,method:"POST",beforeSend:function(){disable_button($button),loading_badge_on_button($button),$("body").trigger("adding_to_cart",[$button,ajax_data])},data:ajax_data}).done(function(response){if("cart_refresh"!==$button.attr("data-wcpt-link-code")){enable_button($button),$(".wcpt-cw-loading-icon").removeClass("wcpt-hide"),$button.find(".wcpt-cart-badge-refresh").remove();var in_cart=$product_row.attr("data-wcpt-in-cart");if(in_cart||(in_cart=0),response.error){var $notice=$(response.notice);$notice.find("a").remove(),alert($notice.text().trim()),$(".wcpt-cw-loading-icon").addClass("wcpt-hide"),in_cart=parseInt(in_cart,10)}else response.success&&(in_cart=parseInt(ajax_data.quantity,10)+parseInt(in_cart,10),$(document.body).trigger("added_to_cart",[response.fragments,response.cart_hash,$button]));0!==in_cart&&add_count_badge_to_button(in_cart,$button),$product_row.attr("data-wcpt-in-cart",in_cart)}else window.location.reload()})}function prep_product_form($modal,$button,pre_select){var link_code=$button.attr("data-wcpt-link-code"),href="cart_ajax"==link_code?"":$button.attr("href");$(".cart",$modal).each(function(){var $form=$(this);$form.hasClass("variations_form")?$form.wc_variation_form():$form.append('<input name="add-to-cart" type="hidden" value="'+pre_select.product_id+'">'),$.fn.init_addon_totals&&$form.init_addon_totals(),"object"==typeof wcPaoInitAddonTotals&&wcPaoInitAddonTotals.init($form),$form.attr("action",href),$(".qty",$form).attr("autocomplete","off"),pre_select&&$.each(pre_select,function(key,val){var $control=$form.find("[name="+key+"]");if($control.is("input.qty")){val=parseInt(val);var min=$control.attr("min")?parseInt($control.attr("min")):0,max=$control.attr("max")?parseInt($control.attr("max")):1e9;val<min&&(val=min),val>max&&(val=max)}$control.val(val)}),"cart_ajax"==link_code&&$form.on("submit",function(e){e.preventDefault(),ajax_data={action:"wcpt_add_to_cart",return_notice:!0},$.each($form.serializeArray(),function(i,field){ajax_data[field.name]=field.value}),wcpt_ajax_add_to_cart($button,ajax_data),$modal.remove(),$("body").removeClass("wcpt-modal-on")})})}function disable_button($button){$button.addClass("wcpt-disabled")}function enable_button($button){$button.removeClass("wcpt-disabled")}function loading_badge_on_button($button){if(!$button.find(".wcpt-cart-badge-refresh").length){var svg='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-loader" color="#384047"><line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line></svg>';$button.append('<i class="wcpt-cart-badge-refresh">'+svg+"</i>")}}function add_count_badge_to_button(in_cart,$button){$button.find(".wcpt-cart-badge-number").length?$button.find(".wcpt-cart-badge-number").html(in_cart):$button.append('<i class="wcpt-cart-badge-number">'+in_cart+"</i>"),$button.closest(".wcpt-row").find(".wcpt-remove").removeClass("wcpt-disabled")}function search_submit(e){var $this=$(this),$search=$this.closest(".wcpt-search"),$input=$search.find(".wcpt-search-input"),table_id=$search.attr("data-wcpt-table-id"),$container=$("#wcpt-"+table_id),$nav_modal=$this.closest(".wcpt-nav-modal"),keyword=$input.val();query=$input.attr("name")+"="+keyword,append=!0,($(e.target).closest(".wcpt-search-submit").length&&"click"==e.type||$(e.target).is(".wcpt-search-input")&&"keydown"==e.type&&(13==e.keyCode||13==e.which))&&($nav_modal.length&&$nav_modal.trigger("wcpt_close"),attempt_ajax($container,query,append,"filter"))}function dropdown_switch_to_mouse_events(){var target=".wcpt-dropdown, .wcpt-tooltip",$body=$("body");$body.off("touchstart.wcpt",target,dropdown_touch_toggle),$body.on("mouseenter.wcpt",target,dropdown_mouse_open),$body.on("mouseleave.wcpt",target,dropdown_mouse_close),$body.on("click.wcpt",target,dropdown_mouse_open),$body.on("mouseleave.wcpt",target,dropdown_mouse_close),$body.one("touchstart",function(){dropdown_switch_to_touch_events()})}function dropdown_switch_to_touch_events(){var target=".wcpt-dropdown, .wcpt-tooltip",$body=$("body");$body.off("mouseenter.wcpt",target,dropdown_mouse_open),$body.off("mouseleave.wcpt",target,dropdown_mouse_close),$body.on("touchstart.wcpt",dropdown_touch_toggle);var width=$(window).width();$(window).one("resize",function(){width!=$(window).width()&&dropdown_switch_to_mouse_events()})}function dropdown_mouse_open(e){var $this=$(this);$this.addClass("wcpt-open"),fix_tooltip_position($this)}function dropdown_mouse_close(e){var $this;$(this).removeClass("wcpt-open")}function dropdown_touch_toggle(e){var $target=$(e.target),container=".wcpt-dropdown, .wcpt-tooltip",$dropdown=$target.closest(container);!$dropdown.length||$dropdown.hasClass("wcpt-open")&&$target.closest(".wcpt-dropdown-label, .wcpt-tooltip-label").length?$("body").find(container).removeClass("wcpt-open"):($dropdown.addClass("wcpt-open"),$("body").find(container).not($dropdown).removeClass("wcpt-open"),fix_tooltip_position($dropdown))}function fix_tooltip_position($tooltip){var $content=$tooltip.find(" > .wcpt-dropdown-menu, > .wcpt-tooltip-content-wrapper > .wcpt-tooltip-content"),content_width=$content.outerWidth(!1),offset_left=$content.offset().left,page_width=$(window).width();if(content_width+30>page_width){$content.outerWidth(page_width-30);var content_width=$content.outerWidth(!1)}if($content.offset().left+content_width>page_width){var offset_required=$content.offset().left+content_width-page_width;$content.css("left","-="+(offset_required+15))}else $content.offset().left<0&&$content.css("left","-="+($content.offset().left-15));if($tooltip.hasClass("wcpt-tooltip")){var $label=$tooltip.find("> .wcpt-tooltip-label"),offset_left=$label.offset().left,width=$label.outerWidth(),$arrow;$tooltip.find("> .wcpt-tooltip-content > .wcpt-tooltip-arrow").css("left",offset_left-$content.offset().left+width/2+"px")}}function attempt_ajax($container,new_query,append,purpose){if(void 0===purpose)throw"WCPT: Define AJAX purpose";var query="",earlier_query=$container.attr("data-wcpt-query-string");query=append&&earlier_query?earlier_query+"&"+new_query:"?"+new_query;var parsed_params=parse_query_string(window.location.search.substring(1));void 0!==window.wcpt_persist_params&&$.each(wcpt_persist_params,function(index,val){parsed_params[val]&&(query+="&"+val+"="+parsed_params[val])});var device="laptop",$scroll_outer=$container.find(".wcpt-table-scroll-wrapper-outer:visible"),table_id=$container.attr("data-wcpt-table-id");$scroll_outer.length?$scroll_outer.hasClass("wcpt-device-phone")?device="phone":$scroll_outer.hasClass("wcpt-device-tablet")&&(device="tablet"):$("body").hasClass("wcpt-nav-modal-on")&&$(".wcpt-nav-modal").attr("data-wcpt-device"),query+="&"+table_id+"_device="+device;var new_query_p=new_query?parse_query_string(new_query):{},earlier_query_p=earlier_query?parse_query_string(earlier_query.substring(1)):{};$.each(new_query_p,function(key,val){if(-1!==key.indexOf("search")&&val&&earlier_query_p[key]!==val.replace(/\+/g," "))return query+="&"+table_id+"_orderby=relevance",!1});var sc_attrs=$container.attr("data-wcpt-sc-attrs"),disable_ajax=!1;sc_attrs&&"{}"!==sc_attrs&&(sc_attrs=htmlentity(sc_attrs),query+="&"+table_id+"_sc_attrs="+sc_attrs,-1!==sc_attrs.indexOf("disable_ajax")&&(disable_ajax=!0));var scroll=!0;if(-1!==$.inArray(purpose,["device_view","lazy_load"])&&(scroll=!1),"filter"==purpose&&(query+="&"+table_id+"_filtered=true"),disable_ajax)return window.location=query,void console.log("disable ajax");$.ajax({url:wcpt_i18n.ajax_url+query,method:"GET",beforeSend:function(){return $container.addClass("wcpt-loading"),!window.wcpt_cache.exist(query)||(ajax_success(window.wcpt_cache.get(query),$container,scroll,device),!1)},data:{action:"wcpt_ajax",id:table_id}}).done(function(response){response&&-1!==response.indexOf("wcpt-table")?(window.wcpt_cache.set(query,response),ajax_success(window.wcpt_cache.get(query),$container,scroll,device)):(console.log("wcpt notice: query fail"),window.location=query)})}function parse_query_string(query){for(var vars=query.split("&"),query_string={},i=0;i<vars.length;i++){var pair=vars[i].split("="),key=decodeURIComponent(pair[0]),value=decodeURIComponent(pair[1]);if(void 0===query_string[key])query_string[key]=decodeURIComponent(value);else if("string"==typeof query_string[key]){var arr=[query_string[key],decodeURIComponent(value)];query_string[key]=arr}else query_string[key].push(decodeURIComponent(value))}return query_string}function ajax_success(response,$container,scroll,device){var $new_container=$(response);$container.replaceWith($new_container),$new_container.trigger("wcpt_layout"),void 0!==window.wp.mediaelement&&window.wp.mediaelement.initialize(),$(".cart",$new_container).each(function(){var $form=$(this);$form.hasClass("variations_form")&&$(this).wc_variation_form(),$.fn.init_addon_totals&&$form.init_addon_totals(),"object"==typeof wcPaoInitAddonTotals&&wcPaoInitAddonTotals.init($form)}),after_every_load($new_container);var sc_attrs_string=$new_container.attr("data-wcpt-sc-attrs"),sc_attrs=sc_attrs_string&&"{}"!==sc_attrs_string?JSON.parse(sc_attrs_string):{},offset={laptop:void 0===sc_attrs.laptop_scroll_offset||""==sc_attrs.laptop_scroll_offset?20:parseInt(sc_attrs.laptop_scroll_offset),tablet:void 0===sc_attrs.tablet_scroll_offset||""==sc_attrs.tablet_scroll_offset?20:parseInt(sc_attrs.tablet_scroll_offset),phone:void 0===sc_attrs.phone_scroll_offset||""==sc_attrs.phone_scroll_offset?20:parseInt(sc_attrs.phone_scroll_offset)};if(scroll){$("html, body").animate({scrollTop:$new_container.offset().top-offset[device]},200);var query=$new_container.attr("data-wcpt-query-string");query&&void 0!==window.history&&history.replaceState({},$("title").text(),query)}}function update_cart_items_ajax(){$(".wcpt, .wcpt-lazy-load").length&&($.post(wcpt_i18n.ajax_url,{action:"wcpt_get_cart"},window.wcpt_update_cart_items),$.post(wcpt_i18n.ajax_url,{action:"wcpt_cart_widget"},function(cart_widget){var $old=$(".wcpt-cart-widget"),$new=$(cart_widget);$("body").append($new),$old.fadeOut(800,function(){$old.remove()})}))}function nav_modal(e){var $button=$(e.target).closest(".wcpt-rn-button"),modal_type=$button.attr("data-wcpt-modal"),$wcpt=$button.closest(".wcpt"),wcpt_id=$wcpt.attr("id"),$nav_modal=$($wcpt.find(".wcpt-nav-modal-tpl").html()),$filters=$wcpt.find(".wcpt-filter").not('[data-wcpt-filter="sort_by"]'),$search=$wcpt.find(".wcpt-search-wrapper"),$sort=$wcpt.find('[data-wcpt-filter="sort_by"].wcpt-filter'),radios={};$(".wcpt-nm-sort-placeholder",$nav_modal).replaceWith($sort.clone()),$(".wcpt-nm-filters-placeholder",$nav_modal).replaceWith($search.clone().add($filters.clone())),"sort"==modal_type?$nav_modal.addClass("wcpt-show-sort").removeClass("wcpt-show-filters"):$nav_modal.addClass("wcpt-show-filters").removeClass("wcpt-show-sort"),$wcpt.find("input[type=radio]:checked").each(function(){var $this=$(this);radios[$this.attr("name")]=$this.val()}),$nav_modal.data("wcpt-radios",radios),$("body").addClass("wcpt-nav-modal-on").append($nav_modal),$nav_modal.find(".wcpt-nm-apply").on("click",function(){var query=$("<form>").append($nav_modal.clone()).serialize(),$container=$("#"+wcpt_id);$nav_modal.remove(),$("body").removeClass("wcpt-nav-modal-on"),$container[0].scrollIntoView(),attempt_ajax($container,query,!1,"filter")}),$nav_modal.filter(".wcpt-show-sort").on("change",function(){var query=$("<form>").append($nav_modal.clone()).serialize(),$container=$("#"+wcpt_id);$nav_modal.trigger("wcpt_close"),attempt_ajax($container,query,!1,"filter")}),$nav_modal.find(".wcpt-nm-reset").on("click",function(){var query=$("<form>").append($nav_modal.clone()).serialize(),$container=$("#"+wcpt_id),query="";$nav_modal.trigger("wcpt_close"),attempt_ajax($container,"",!1,"filter")}),$nav_modal.find("a.wcpt-nm-close").on("click",function(e){e.preventDefault();var $container=$("#"+wcpt_id),radios=$.extend({},$nav_modal.data("wcpt-radios"));$nav_modal.trigger("wcpt_close"),$.each(radios,function(name,val){$wcpt.find('input[type=radio][name="'+name+'"][value="'+val+'"]').each(function(){$(this).prop("checked","checked")})})})}function prep_variation_options($container){$(".wcpt-product-type-variable",$container).each(function(){var $row=$(this),$dropdown=$(".wcpt-select-variation-dropdown",$row),$radio=$(".wcpt-variation-radio",$row),$form=$(".variations_form",$row),$options;$dropdown.add($radio).add($form).length&&$row.data("wcpt_variation_ops",!0),$form.length?$form.each(function(){var $form=$(this);setTimeout(function(){$form.find("select").first().change()},200)}):$dropdown.length?$dropdown.val()&&$dropdown.trigger("change"):$radio.length&&$radio.filter(":checked").trigger("change")})}if($(window).on("resize",window_resize),$(window).on("orientationchange",function(e){trigger_layout()}),trigger_layout(),$("body").offset().top?lazy_load_start():($(window).one("mousemove scroll touchstart",lazy_load_start),setTimeout(lazy_load_start,4e3)),$("body").on("adding_to_cart",function(e,$button,data){$(".wcpt-cw-loading-icon").removeClass("wcpt-hide");var $row=get_product_rows($button);if($row.length){var $input=$row.find("input.qty, select.wcpt-qty-select"),min=$input.attr("min")?$input.attr("min"):1;$input.val(min)}}),$("body").on(" removed_from_cart",function(e,fragments,cart_hash,buttons){update_cart_items_ajax()}),$("body").on("click.wcpt",".wcpt-button",button_click),$("body").on("click",".wcpt-search-submit",search_submit),$("body").on("keydown",".wcpt-search-input",search_submit),$("body").on("click",".wcpt-search-clear",function(e){var $this=$(this),$search=$this.closest(".wcpt-search"),$input=$search.find(".wcpt-search-input"),table_id=$search.attr("data-wcpt-table-id"),$container=$("#wcpt-"+table_id),$nav_modal=$this.closest(".wcpt-nav-modal"),query="&"+$input.attr("name")+"=",append=!0;$input.val(""),attempt_ajax($container,query,!0,"filter"),$nav_modal.length&&$nav_modal.trigger("wcpt_close")}),dropdown_switch_to_mouse_events(),$("body").on("change",".wcpt-navigation",function(e){var $target=$(e.target);if($target.closest(".wcpt-hierarchy").length){var checked=$target.prop("checked");if($target.hasClass("wcpt-hr-parent-term")){var ct_selector="input[type=checkbox], input[type=radio]",$child_terms;$target.closest("label").siblings(".wcpt-hr-child-terms-wrapper").find(ct_selector).prop("checked",!1)}var $ancestors=$target.parents(".wcpt-hr-child-terms-wrapper");$ancestors.length&&$ancestors.each(function(){var $parent_term;$(this).siblings("label").find(".wcpt-hr-parent-term").prop("checked",!1)})}if($target.closest(".wcpt-range-filter")){if($target.hasClass("wcpt-range-input-min")||$target.hasClass("wcpt-range-input-max"))return;var min=$target.attr("data-wcpt-range-min")||"",max=$target.attr("data-wcpt-range-max")||"",$range_filter=$target.closest(".wcpt-range-filter"),$min=$range_filter.find(".wcpt-range-input-min"),$max=$range_filter.find(".wcpt-range-input-max");$min.val(min),$max.val(max)}if(!$target.closest(".wcpt-search").length&&!$target.closest(".wcpt-nav-modal").length){var $this=$(this),$nav=$this.add($this.siblings(".wcpt-navigation")),$filter=$target.closest(".wcpt-filter"),$container=$nav.closest(".wcpt"),table_id=$container.attr("id").substring(5),$nav_clone=$nav.clone(),$reverse_check=$();$nav_clone.find("[data-wcpt-reverse-value]:not(:checked)").each(function(){var $this=$(this);$this.attr("value",$this.attr("data-wcpt-reverse-value")),$this.prop("checked","checked"),$reverse_check=$reverse_check.add($this.clone())}),$nav_clone=$nav_clone.add($reverse_check);var query=$("<form>").append($nav_clone).serialize();if(!$(e.target).closest('[data-wcpt-filter="sort_by"]').length){var $sortable_headings,$current_sort_col=$(".wcpt-heading.wcpt-sortable:visible",$container).filter(function(){return $(this).find(".wcpt-sorting-icons.wcpt-sorting-asc, .wcpt-sorting-icons.wcpt-sorting-desc").length}),col_index,order;if($current_sort_col.length)query+="&"+table_id+"_orderby=column_"+$current_sort_col.index()+"&"+table_id+"_order="+($current_sort_col.find(".wcpt-sorting-icons.wcpt-sorting-asc").length?"ASC":"DESC")}attempt_ajax($container,query,!1,"filter")}}),$("body").on("keyup",".wcpt-range-input-min, .wcpt-range-input-max",function(e){var $this,$filters=$(this).closest(".wcpt-navigation"),code;13==(e.keyCode?e.keyCode:e.which)&&$filters.trigger("change")}),$("body").on("click",".wcpt-range-submit-button",function(e){var $this,$filters;$(this).closest(".wcpt-navigation").trigger("change")}),$("body").on("click",".wcpt-clear-filter",function(e){var $clear_filter=$(this),$target=$(e.target);if($target.closest(".wcpt-dropdown-menu"))var $sub_option=$target.closest(".wcpt-dropdown-option");else $sub_option=!1;var $container=$clear_filter.closest(".wcpt"),filter=$clear_filter.attr("data-wcpt-filter"),$navs=$("> .wcpt-navigation",$container),$inputs=$();if("attribute"==filter||"category"==filter||"taxonomy"==filter)var taxonomy=$clear_filter.attr("data-wcpt-taxonomy"),term=$clear_filter.attr("data-wcpt-value"),$inputs=$navs.find('.wcpt-filter[data-wcpt-filter="'+filter+'"][data-wcpt-taxonomy="'+taxonomy+'"]').find('input[value="'+term+'"]');else if("custom_field"==filter){var meta_key=$clear_filter.attr("data-wcpt-meta-key"),value=$clear_filter.attr("data-wcpt-value"),$filter=$navs.find('.wcpt-filter[data-wcpt-filter="'+filter+'"][data-wcpt-meta-key="'+meta_key+'"]');$inputs=$filter.hasClass("wcpt-range-filter")?$filter.find("input"):$navs.find('.wcpt-filter[data-wcpt-filter="'+filter+'"][data-wcpt-meta-key="'+meta_key+'"]').find('input[value="'+value+'"]')}else if("price_range"==filter)var $inputs=$navs.find('.wcpt-filter[data-wcpt-filter="'+filter+'"]').find("input");else"search"==filter?$inputs=$navs.find('input[type=search][data-wcpt-value="'+htmlentity($clear_filter.attr("data-wcpt-value"))+'"]'):"rating"==filter&&($inputs=$navs.find('.wcpt-filter[data-wcpt-filter="rating"]').find("input"));$inputs.filter(":input[type=checkbox], :input[type=radio]").prop("checked",!1),$inputs.filter(":input[type=text], :input[type=number], :input[type=search]").val(""),$navs.first().trigger("change")}),$("body").on("click",".wcpt-clear-filters, .wcpt-clear-all-filters",function(e){e.preventDefault();var $this,$container,query="";attempt_ajax($(this).closest(".wcpt"),"",!1,"filter")}),$("body").on("click",".wcpt-heading",function(){var $this=$(this),$sorting=$this.find(".wcpt-sorting-icons");if($sorting.length){var order=$sorting.hasClass("wcpt-sorting-asc")?"desc":"asc",col_index=$this.index(),$container=$this.closest(".wcpt"),table_id=$container.attr("id").substring(5),device="laptop",query;if($(".wcpt-sorting-"+order+"-icon",$sorting).hasClass("wcpt-hide")){if($(".wcpt-sorting-"+order+"-icon",$sorting).siblings().hasClass("wcpt-active"))return;order="asc"==order?"desc":"asc"}attempt_ajax($container,table_id+"_orderby=column_"+col_index+"&"+table_id+"_order="+order+"&"+table_id+"_device="+device,!0,!1)}}),$("body").on("click",".wcpt-pagination .page-numbers:not(.dots):not(.current)",function(e){e.preventDefault();var $this=$(this),$container=$this.closest(".wcpt"),table_id,query=$container.attr("id").slice(5)+"_paged="+$this.text();append=!0,attempt_ajax($container,query,append,"paginate")}),$("body").on("click",".wcpt-modal, .wcpt-close-modal",function(e){var $target=$(e.target),$modal=$(this).closest(".wcpt-modal");($target.hasClass("wcpt-modal")||$target.closest(".wcpt-close-modal").length)&&($modal.trigger("wcpt_close"),$modal.remove(),$("body").removeClass("wcpt-modal-on"))}),window.wcpt_update_cart_items=function(cart){var cart_products={},total=0;$.each(cart,function(key,item){cart_products[item.product_id]||(cart_products[item.product_id]=0),item.variation_id&&!cart_products[item.variation_id]&&(cart_products[item.variation_id]=0),cart_products[item.product_id]+=item.quantity,item.variation_id&&(cart_products[item.variation_id]+=item.quantity),total+=item.quantity}),$(".wcpt-row").each(function(){var $this=$(this),id=$this.attr("data-wcpt-variation-id")?$this.attr("data-wcpt-variation-id"):$this.attr("data-wcpt-product-id"),qty=cart_products[id]?cart_products[id]:0,$badge=$this.find(".wcpt-cart-badge-number"),$remove=$this.find(".wcpt-remove");$this.attr("data-wcpt-in-cart",qty),qty?($badge.text(qty),$remove.removeClass("wcpt-disabled")):($badge.text(""),$remove.addClass("wcpt-disabled")),$remove.removeClass("wcpt-removing")})},update_cart_items_ajax(),$("body").on("click touchstart","[data-wcpt-href]",function(){window.location=$(this).attr("data-wcpt-href")}),$("body").on("click",".wcpt-left-sidebar .wcpt-filter > .wcpt-filter-heading",function(){var $this,$filter;$(this).closest(".wcpt-filter").toggleClass("wcpt-filter-open")}),$("body").on("click",".wcpt-ac-icon",function(e){var $this;return $(this).closest(".wcpt-accordion").toggleClass("wcpt-ac-open"),e.stopPropagation(),!1}),$("body").on("wcpt_close",".wcpt-nav-modal",function(){var $this=$(this),table_id=$this.attr("data-wcpt-table-id"),$container=$("#wcpt-"+table_id);$this.remove(),$("body").removeClass("wcpt-nav-modal-on"),$container[0].scrollIntoView()}),$("body").on("click",".wcpt-tg-trigger",function(){var $this=$(this),$toggle=$this.closest(".wcpt-toggle"),$table=$this.closest(".wcpt-table"),ft=$table.data("freezeTable");$toggle.toggleClass(" wcpt-tg-on wcpt-tg-off "),ft&&!ft.disabled&&$table.freezeTable("cell_resize")}),$("body").on("click",".wcpt-rn-filter, .wcpt-rn-sort",nav_modal),$("body").on("click",".wcpt-accordion-heading",function(){$(this).closest(".wcpt-accordion").toggleClass("wcpt-open")}),$("body").on("click",".wcpt-lightbox-enabled",function(){var $this,url=$(this).attr("data-wcpt-lightbox"),$el=$('<div class="wcpt-lightbox-screen"><img class="wcpt-lightbox-image" src="'+url+'"></div>');$("body").append($el),$el.on("click ",function(){$el.remove()})}),$("body").on("mouseenter",'.wcpt-zoom-enabled[data-wcpt-zoom-trigger="image_hover"]',function(){var $this=$(this),level=$this.attr("data-wcpt-zoom-level");level||(level="1.5"),$this.closest(".wcpt-device-tablet, .wcpt-device-phone").length||($this.css({transform:"scale("+level+")","z-index":"2"}),$this.one("mouseleave",function(){$this.css({transform:"","z-index":""})}))}),$("body").on("mouseenter",".wcpt-row",function(){var $row=$(this);$row.find('.wcpt-zoom-enabled[data-wcpt-zoom-trigger="row_hover"]').each(function(){var $zoom_me=$(this),level=$zoom_me.attr("data-wcpt-zoom-level");level||(level="1.5"),$zoom_me.closest(".wcpt-device-tablet, .wcpt-device-phone").length||($zoom_me.css({transform:"scale("+level+")","z-index":"2"}),$row.one("mouseleave",function(){$zoom_me.css({transform:"","z-index":""})}))})}),$("body").on("click",".wcpt-variation-radio",function(e){var $this=$(this),$variation=$this.closest(".wcpt-select-variation"),$row=$this.closest(".wcpt-row");$variation.hasClass("wcpt-selected")&&($this.prop("checked",!1),$this.change(),$row.trigger("select_variation",{variation_id:!1,complete_match:!1,attributes:!1,variation:!1,variation_found:!1,variation_selected:!1,variation_available:!1}))}),$("body").on("change",".wcpt-variation-radio",function(){var $this=$(this),$others=$('.wcpt-variation-radio[name="'+$(this).attr("name")+'"]').not($(this)),$variation=$this.closest(".wcpt-select-variation");$this.is(":checked")?$variation.addClass("wcpt-selected"):$variation.removeClass("wcpt-selected"),$others.not(":checked").closest(".wcpt-select-variation").removeClass("wcpt-selected")}),$("body").on("change",".wcpt-table input.qty",function(e,syncing){var $input=$(this),$product_rows,$siblings=get_product_rows($input).find("input.qty, select.wcpt-qty-select").not(this);$siblings.not(this).val($input.val()),syncing||$siblings.trigger("change",!0)}),$("body").on("select_variation",".wcpt-product-type-variable",function(e,data){var $row=get_product_rows($(this));if($row.find(".wcpt-select-variation-dropdown").val(data.variation_id),$row.find('.wcpt-variation-radio[value="'+data.variation_id+'"]').prop("checked",!0),$row.data("wcpt_variation",data.variation),$row.data("wcpt_variation_id",data.variation_id),$row.data("wcpt_complete_match",data.complete_match),$row.data("wcpt_attributes",data.attributes),$row.data("wcpt_variation_found",data.variation_found),$row.data("wcpt_variation_selected",data.variation_selected),$row.data("wcpt_variation_available",data.variation_available),data.variation_found&&data.variation_selected&&data.variation_available?$(".wcpt-button-cart_ajax",$row).removeClass("wcpt-disabled"):$(".wcpt-button-cart_ajax",$row).addClass("wcpt-disabled"),data.variation){var $input=$row.find(".wcpt-quantity-wrapper input[type=number].qty");$input.length&&($input.attr({min:parseInt(data.variation.min_qty),max:parseInt(data.variation.max_qty)}),"number"==typeof data.variation.min_qty&&$input.val()<data.variation.min_qty?$input.val(data.variation.min_qty):"number"==typeof data.variation.max_qty&&$input.val()>data.variation.max_qty&&$input.val(data.variation.max_qty),$input.change());var $select=$row.find(".wcpt-quantity-wrapper > select.wcpt-qty-select");if($select.length){var qty_label=$select.attr("data-wcpt-qty-label"),max_qty=parseInt($select.attr("data-wcpt-max-qty")),val=data.variation.min_qty,options='<option value="'+data.variation.min_qty+'" selected="selected">'+qty_label+data.variation.min_qty+"</option>";for(data.variation.max_qty&&(max_qty=data.variation.max_qty);val<max_qty;)options+="<option>"+(val+=data.variation.step||1)+"</option>";$select.html(options),$select.attr("min",data.variation.min_qty)}var $product_image_wrapper=$(".wcpt-product-image-wrapper",$row),$product_image=$(".wcpt-product-image-wrapper > img",$row);$product_image.length&&data.variation.image.src&&($product_image.attr({src:data.variation.image.src,srcset:data.variation.image.srcset}),$product_image_wrapper.hasClass("wcpt-lightbox-enabled")&&$product_image_wrapper.attr("data-wcpt-lightbox",data.variation.image.full_src))}}),$("body").on("change",".wcpt-select-variation-dropdown",function(e){var $this=$(this),$selected=$this.find("option:selected"),$row;$this.closest(".wcpt-row").trigger("select_variation",{variation_id:$this.val(),complete_match:$selected.hasClass("wcpt-complete_match"),attributes:JSON.parse($selected.attr("data-wcpt-attributes")),variation:JSON.parse($selected.attr("data-wcpt-variation")),variation_found:!0,variation_selected:!0,variation_available:!$selected.is(":disabled")})}),$("body").on("change",".wcpt-variation-radio",function(e){var $this=$(this),$wrapper=$this.closest(".wcpt-select-variation"),$row=$this.closest(".wcpt-row");$this.is(":checked")&&$row.trigger("select_variation",{variation_id:$this.val(),complete_match:$wrapper.hasClass("wcpt-complete_match"),attributes:JSON.parse($wrapper.attr("data-wcpt-attributes")),variation:JSON.parse($wrapper.attr("data-wcpt-variation")),variation_found:!0,variation_selected:!0,variation_available:!$this.is(":disabled")})}),$("body").on("woocommerce_variation_has_changed",".wcpt-row .variations_form",function(e){var $form=$(this),variations=JSON.parse($form.attr("data-product_variations")),$row=$form.closest(".wcpt-row"),$variation_id=$(".variation_id",$form),variation={},attributes={},selected_variation=$variation_id.val();$.each(variations,function(index,value){if(parseInt(value.variation_id)==selected_variation)return attributes=value.attributes,variation=value,!1}),$row.trigger("select_variation",{variation:variation,variation_id:selected_variation,complete_match:!0,attributes:attributes,variation_found:!0,variation_selected:!$variation_id.siblings(".wc-variation-selection-needed").length,variation_available:!$variation_id.siblings(".wc-variation-is-unavailable").length})}),"ontouchstart"in document.documentElement)var mousedown="touchstart",mouseup="touchend";else var mousedown="mousedown",mouseup="mouseup";function maybe_disable_qty_controllers($qty_wrapper){$qty_wrapper.each(function(){var $this=$(this),$minus=$this.children(".wcpt-minus"),$plus=$this.children(".wcpt-plus"),$qty=$this.find(".qty"),min=$qty.attr("min")?parseInt($qty.attr("min")):0,max=!!$qty.attr("max")&&parseInt($qty.attr("max")),step=$qty.attr("step")?parseInt($qty.attr("step")):1,val=$qty.val()?parseInt($qty.val()):min;$minus.removeClass("wcpt-disabled"),val-step<min&&$minus.addClass("wcpt-disabled"),$plus.removeClass("wcpt-disabled"),!1!==max&&val+step>max&&$plus.addClass("wcpt-disabled")})}$("body").on(mousedown,".wcpt-qty-controller",function qty_controller_onMousedown(){var $this=$(this),$parent=$this.parent(),$qty=$this.siblings(".qty"),min=$qty.attr("min")?parseInt($qty.attr("min")):0,max=!!$qty.attr("max")&&parseInt($qty.attr("max")),step=$qty.attr("step")?parseInt($qty.attr("step")):1,val=$qty.val()?parseInt($qty.val()):min;$this.hasClass("wcpt-plus")?$qty.val(val+step).change():$qty.val(val-step).change();var count=0,clear=setInterval(function(){if(!(++count%5||count<50)){var val=$qty.val()?parseInt($qty.val()):min;$this.hasClass("wcpt-plus")?$qty.val(val+step).change():$qty.val(val-step).change()}},10);$this.data("wcpt_clear",clear),$this.on(mouseup,function(){var $this=$(this),clear=$this.data("wcpt_clear");clear&&(clearInterval(clear),$this.data("wcpt_clear",!1))}),maybe_disable_qty_controllers($parent)}),$("body").on("change",".wcpt-quantity-wrapper .qty",function qty_controller_validate(e,syncing){var $this=$(this),min=$this.attr("min")?parseInt($this.attr("min")):0,max=!!$this.attr("max")&&parseInt($this.attr("max")),step=$this.attr("step")?parseInt($this.attr("step")):1,val=$this.val()?parseInt($this.val()):min;val<min&&$this.val(min),!1!==max&&val>max&&$this.val(max),syncing||$this.trigger("change",!0),maybe_disable_qty_controllers($(this).parent())}),$("body").on("keypress",".wcpt-quantity-wrapper .qty",function(e){var $rows;13==e.keyCode&&get_product_rows($(this)).find('.wcpt-button[data-wcpt-link-code^="cart"]').eq(0).click()}),$("body").on("contextmenu",".wcpt-noselect",function(){return!1}),$("body").on("click",".wcpt-player__button",function(){var $button=$(this),$container=$button.closest(".wcpt-player"),src=$container.attr("data-wcpt-src"),$el=$container.data("wcpt-media-el");$el||($el=$('<audio class="wcpt-audio-elm" src="'+src+'" loop></audio>'),$container.append($el),$container.data("wcpt-media-el",$el)),$button.hasClass("wcpt-player__play-button")?($el[0].play(),$container.hasClass("wcpt-media-loaded")||$el.on("canplay",function(){$container.addClass("wcpt-media-loaded")}),$("audio.wcpt-audio-elm").not($el).each(function(){this.currentTime=0,this.pause()}),$(".wcpt-player.wcpt-player--playing").not($container).find(".wcpt-player__pause-button").click()):$el[0].pause(),$container.toggleClass("wcpt-player--playing")}),$("body").on("click",".wcpt-filter-link-terms > [data-wcpt-slug]",function(){var $this=$(this),slug=$this.attr("data-wcpt-slug"),taxonomy=$this.parent().attr("data-wcpt-taxonomy"),$container,$nav=$this.closest(".wcpt").find(".wcpt-navigation:visible"),$option=$nav.find('[data-wcpt-taxonomy="'+taxonomy+'"] [data-wcpt-slug="'+slug+'"]');$option.length&&($nav.addClass("wcpt-force-hide-dropdown-menus"),$option.click())}),$("body").on("click",".wcpt-remove:not(.wcpt-disabled):not(.wcpt-removing)",function(){var $this=$(this),$row=$product_row=get_product_rows($this),product_id=$row.attr("data-wcpt-product-id"),variation_id=$row.attr("data-wcpt-variation-id"),$remove=$row.find(".wcpt-remove"),$button=$row.find(".wcpt-button-cart_ajax"),button_control=$button.length&&!$button.hasClass("wcpt-disabled");$remove.addClass("wcpt-removing"),$.ajax({url:wcpt_i18n.ajax_url,method:"POST",beforeSend:function(){button_control&&disable_button($button),loading_badge_on_button($button)},data:{action:"wcpt_remove_product",product_id:product_id,variation_id:variation_id}}).done(function(response){$(document.body).trigger("removed_from_cart",[response.fragments,response.cart_hash,$button]),button_control&&enable_button($button),$button.find(".wcpt-cart-badge-refresh, .wcpt-cart-badge-number").remove()})}),$(".wcpt").each(function(){after_every_load($(this))})});